"use strict";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2015 - 2021, Lalilo
 * @license     http://opensource.org/licenses/MIT  MIT License
 * @link        https://www.ioa.tw/
 */var GoogleMap={closure:null,inited:!1,base:function base(){this.inited||(this.inited=!0,void function(){GoogleMap.Marker.prototype=Object.create(google.maps.OverlayView.prototype),Object.assign(GoogleMap.Marker.prototype,{draw:function draw(){return this._vue.pixel=this._vue.$el&&this._vue.position?this.getProjection().fromLatLngToDivPixel(this._vue.position):null,this},onAdd:function onAdd(){return this._vue.$el||this._el.appendChild(this._vue.$mount().$el),this._removeVue()._addVue(),this._vue.$el&&this.getPanes().overlayImage.appendChild(this._vue.$el),this._vue.$el&&this._vue.$el.addEventListener("click",function(a){return a.stopPropagation()}),this._vue.$el&&this._vue.$el.addEventListener("dblclick",function(a){return a.stopPropagation()}),this},remove:function remove(){return this._removeVue(),this._vue.$el&&this._vue.$el.parentNode.removeChild(this._vue.$el),this._vue.$el=null,this},setPosition:function setPosition(a){if(null===a)return this._vue.position=null,this.draw(),this;if("object"!=_typeof(a)||null===a)return this;if(Array.isArray(a)){if(2>a.length)return this;a=new google.maps.LatLng(a[0],a[1])}if(!(a instanceof google.maps.LatLng)){if(void 0===a.lat||void 0===a.lng)return this;a=new google.maps.LatLng(a.lat,a.lng)}return a instanceof google.maps.LatLng?(this._vue.position=a,this.draw(),this):this},setClassName:function setClassName(a){return(a=GoogleMap.Marker._toStr(a,!0),null===a||""===a)?this:(this._vue.className=a,this)},setTop:function setTop(a){return(a=GoogleMap.Marker._toNum(a),null===a)?this:(this._vue.top=a,this)},setLeft:function setLeft(a){return(a=GoogleMap.Marker._toNum(a),null===a)?this:(this._vue.left=a,this)},setWidth:function setWidth(a){return(a=GoogleMap.Marker._toNum(a),null===a||0>=a)?this:(this._vue.width=a,this)},setHeight:function setHeight(a){return(a=GoogleMap.Marker._toNum(a),null===a||0>=a)?this:(this._vue.height=a,this)},setText:function setText(a){return(a=GoogleMap.Marker._toStr(a,!0),null===a)?this:(this._vue.text=a,this)},setHtml:function setHtml(a){return(a=GoogleMap.Marker._toStr(a,!0),null===a)?this:(this._vue.html=a,this)},onDrag:function onDrag(a){var b=this;return null===a?(this._vue.drag&&(google.maps.event.removeListener(this._vue.drag.mouseleave),google.maps.event.removeListener(this._vue.drag.mousemove)),this._vue.drag=null,delete this._vue.events.mousedown,delete this._vue.events.mouseup,this):"function"==typeof a?(this._vue.drag={able:!0,ing:!1,origin:null,mouseleave:null,mousemove:null,func:a,default:this.map.get("draggable")},this._vue.events.mousedown=function(a){b.map&&(b.map.set("draggable",!1),b._vue.drag.ing=!0,b._vue.drag.origin=a,b._vue.drag.func.call(b,b.position,0,b,a),b._vue.drag.mouseleave=b.getMap().getDiv().addEventListener("mouseleave",function(){return b._vue.events&&b._vue.events.mouseup&&b._vue.events.mouseup()}),b._vue.drag.mousemove=b.getMap().getDiv().addEventListener("mousemove",function(a){if(b._vue.drag&&b._vue.drag.origin){var c=b._vue.drag.origin.clientX-a.clientX,d=b._vue.drag.origin.clientY-a.clientY,e=b.getProjection().fromLatLngToDivPixel(b.position),f=b.getProjection().fromDivPixelToLatLng(new google.maps.Point(e.x-c,e.y-d));b._vue.drag.origin=a,b.setPosition(f),b._vue.drag.func.call(b,f,1,b,a)}}))},this._vue.events.mouseup=function(a){b.map&&(b.map.set("draggable",b._vue.drag["default"]),google.maps.event.removeListener(b._vue.drag.mouseleave),google.maps.event.removeListener(b._vue.drag.mousemove),b._vue.drag.ing=!1,b._vue.drag.origin=null,b._vue.drag.mouseleave=null,b._vue.drag.mousemove=null,b._vue.drag.func.call(b,b.position,-1,b,a))},this):this},onClick:function onClick(a){return"function"==typeof a?(this._vue.events.click=a.bind(this,this.position,this),this):this},onEvents:function onEvents(a){if("object"!=_typeof(a)||null===a||Array.isArray(a))return this;var b={};for(var c in a)"function"==typeof a[c]&&(b[c]=a[c].bind(this,this.position,this));return this._vue.events=b,this},setCss:function setCss(a){return void 0===a?this:"object"!=_typeof(a)||null===a||Array.isArray(a)?this:(this._vue.css=a,this)},setVue:function setVue(a){return void 0===a?this:("function"==typeof a&&(a=a()),"object"!=_typeof(a)||null===a||Array.isArray(a))?this:(a instanceof Vue||("undefined"==typeof a.template&&(a.template=""),"undefined"!=typeof El3&&("string"==typeof a.template&&(a.template=El3(a.template)),a.template instanceof El3&&(a.template=a.template.toString())),"object"==_typeof(a.template)&&(a.template=a.template.toString()),a=new Vue(a)),!(a instanceof Vue))?this:(this._removeVue(),a.marker=this,this._vue.vue=a,this._addVue(),this)},setOptions:function setOptions(a){return"object"==_typeof(a)&&null!==a&&!Array.isArray(a)||(a={}),this.setTop(a.top).setTop(a.t),this.setLeft(a.left).setLeft(a.l),this.setWidth(a.width).setWidth(a.w),this.setHeight(a.height).setHeight(a.h),this.setHtml(a.html),this.setText(a.text),this.setVue(a.vue),this.setClassName(a.className).setClassName(a["class"]).setClassName(a.c),this.setCss(a.style),this.onEvents(a.events),this.setPosition(a.position),this.setMap(a.map),this},_removeVue:function _removeVue(){return this._vue.vue&&this._vue.vue.$el&&(this._vue.vue.$el.parentNode.removeChild(this._vue.vue.$el),this._vue.vue.$el=null,this._vue.vue=null),this},_addVue:function _addVue(){return this._vue.vue&&this._vue.$el&&this._vue.$el.appendChild(this._vue.vue.$mount().$el),this}}),Object.defineProperty(GoogleMap.Marker.prototype,"className",{get:function get(){return this._vue.className}}),Object.defineProperty(GoogleMap.Marker.prototype,"class",{get:function get(){return this._vue.className}}),Object.defineProperty(GoogleMap.Marker.prototype,"c",{get:function get(){return this._vue.className}}),Object.defineProperty(GoogleMap.Marker.prototype,"width",{get:function get(){return this._vue.width}}),Object.defineProperty(GoogleMap.Marker.prototype,"height",{get:function get(){return this._vue.height}}),Object.defineProperty(GoogleMap.Marker.prototype,"w",{get:function get(){return this._vue.width}}),Object.defineProperty(GoogleMap.Marker.prototype,"h",{get:function get(){return this._vue.height}}),Object.defineProperty(GoogleMap.Marker.prototype,"top",{get:function get(){return this._vue.top}}),Object.defineProperty(GoogleMap.Marker.prototype,"left",{get:function get(){return this._vue.left}}),Object.defineProperty(GoogleMap.Marker.prototype,"t",{get:function get(){return this._vue.top}}),Object.defineProperty(GoogleMap.Marker.prototype,"l",{get:function get(){return this._vue.left}}),Object.defineProperty(GoogleMap.Marker.prototype,"vue",{get:function get(){return this._vue.vue}}),Object.defineProperty(GoogleMap.Marker.prototype,"position",{get:function get(){return this._vue.position}})}(),this.closure&&this.closure())},init:function init(a,b){window.gmc=function(){$(window).trigger("gm")},$(window).bind("gm",GoogleMap.base.bind(GoogleMap)),this.closure=b,a=a[Math.floor(Math.random()*a.length)],$.getScript("https://maps.googleapis.com/maps/api/js?"+(a?"key="+a+"&":"")+"language=zh-TW&libraries=visualization&callback=gmc",GoogleMap.base.bind(GoogleMap))}};GoogleMap.Marker=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return this instanceof GoogleMap.Marker?void(this._el=document.body,c instanceof HTMLElement&&(this._el=c),c instanceof Vue&&(this._el=c.$el),this._vue=new Vue({data:{drag:null,top:null,left:null,width:null,height:null,className:null,css:{},text:null,html:null,events:{},pixel:null,position:null,vue:null},computed:{style:function style(){if(!(this.pixel&&this.$el))return{display:"none"};var a=null===this.height?this.$el.offsetHeight:this.height,b=null===this.width?this.$el.offsetWidth:this.width,c=null===this.top?0:this.top,d=null===this.left?0:this.left;return _objectSpread({cursor:function(a){return a?a.ing?"grabbing":a.able?"grab":void 0:"default"}(this.drag),position:"absolute",display:"inline-block",top:"".concat(this.pixel.y-a/2+c,"px"),left:"".concat(this.pixel.x-b/2+d,"px"),width:"".concat(b,"px"),height:"".concat(a,"px")},this.css)},content:function content(){return null===this.vue?null===this.html?null===this.text?{}:{innerText:this.text}:{innerHTML:this.html}:{}}},template:"<div :class=\"className\" :draggable=\"drag\" :style=\"style\" v-bind.prop=\"content\" v-on=\"events\"></div>"}),this.setOptions(b).setClassName(a)):new GoogleMap.Marker(a,b)},GoogleMap.Marker._toStr=function(a,b){if("function"==typeof a&&(a=a()),"object"==_typeof(a)&&null!==a&&(a="".concat(a)),"number"==typeof a){if(isNaN(a))return null;a="".concat(a)}return"string"==typeof a?b?a.trim():a:null},GoogleMap.Marker._toNum=function(a){return(a=GoogleMap.Marker._toStr(a,!0),null===a||""===a)?null:(a=parseFloat(a),isNaN(a)?null:a)};